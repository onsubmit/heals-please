<div class="outer">
    <div class="boss frame" data-bind="css: { 'casting': boss.currentCasts }">
        <div class="health-bar-background">
            <!-- ko if: !inCombat() || allowPause -->
            <div class="game-actions frame thin">
                <div data-bind="click: engageBoss, visible: !inCombat()">Engage</div>
                <!-- ko if: allowPause -->
                <div data-bind="click: pause, visible: inCombat() && !isPaused()">Pause</div>
                <div data-bind="click: resume, visible: isPaused">Resume</div>
                <!-- /ko -->
            </div>
            <!-- /ko -->
            <div class="health-bar" data-bind="animate: inCombat() ? boss.health : null">
                <div class="boss-name nowrap" data-bind="text: boss.name">&nbsp;</div>
            </div>
        </div>
        <div class="boss-cast-bars" data-bind="foreach: { data: boss.currentCasts, as: 'bossCast' }">
            <div class="cast-bar-background">
                <div class="cast-bar" data-bind="
                    animate: bossCast.value() || $parent.animations.fadeOutCastBar,
                    animateAction: bossCast && bossCast.action">&nbsp;</div>

                <div class="cast-bar-text nowrap" data-bind="
                    css: { 'casting': bossCast.value },
                    text: bossCast && bossCast.previous() && bossCast.previous().name,
                    animate: !bossCast.value && $parent.animations.fadeOutCastBar"></div>
            </div>
        </div>
    </div>
</div>
<div class="bottom">
    <div class="raid">
        <div class="party" data-bind="foreach: { data: friendlies.members, as: 'member' }">
            <div class="party-member">
                <div class="frame" data-bind="
                    click: $parent.player.setTarget,
                    css: { 'selected': $parent.player.target() === member }">
                    <div class="party-member-name nowrap" data-bind="
                        text: member.name,
                        css: { 'targeted': $parent.boss.targets.indexOf(member) !== -1 }">
                    </div>
                    <div class="health-bar-background">
                        <div class="health-bar" data-bind="style: { width: member.healthPercentageString }">&nbsp;</div>
                        <div class="health-bar-text nowrap" data-bind="text: member.healthStatusString"></div>
                    </div>
                </div>
                <div class="party-member-buffs-container">
                    <div class="party-member-buffs" data-bind="foreach: { data: member.debuffs, as: 'debuff' }">
                        <img data-bind="attr: { src: debuff.icon }" />
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="cast-bar-container frame thin unselectable">
        <div class="cast-bar-background">
            <div class="cast-bar" data-bind="
                animate: currentCast.value() || animations.fadeOutCastBar,
                animateAction: currentCast.action">&nbsp;</div>

            <div class="cast-bar-text nowrap" data-bind="
                css: { 'casting': currentCast.value },
                text: currentCast.previous() && currentCast.previous().name,
                animate: !currentCast.value() && animations.fadeOutCastBar"></div>
        </div>
    </div>
    <div class="mana-bar-container frame thin unselectable" data-bind="css: { 'casting': currentCast.value }">
        <div class="mana-bar-background">
            <div class="mana-bar" data-bind="style: { width: player.manaPercentageString }">&nbsp;</div>
            <div class="health-bar-text nowrap" data-bind="text: player.manaStatusString"></div>
        </div>
    </div>
    <div class="actions" data-bind="foreach: { data: player.actions, as: 'action' }">
        <div class="action frame" data-bind="text: action, click: $parent.cast"></div>
    </div>
</div>