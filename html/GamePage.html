<div class="outer">
    <div class="boss frame" data-bind="css: { 'casting': boss.currentCast }">
        <div class="health-bar-background">
            <div class="health-bar" data-bind="animate: inCombat() ? boss.health : null">
                <div class="boss-name nowrap" data-bind="text: boss.name">&nbsp;</div>
            </div>
        </div>
        <!-- ko if: boss.currentCast -->
        <div class="cast-bar-background">
            <div class="cast-bar" data-bind="
                animate: boss.currentCast() || fadeOutCastBarAnimation,
                animateAction: boss.currentCast.action">&nbsp;</div>

            <div class="health-bar-text nowrap" data-bind="text: boss.currentCast().name"></div>
        </div>
        <!-- /ko -->
    </div>
    <div class="raid">
        <div class="party" data-bind="foreach: { data: friendlies.members, as: 'member' }">
            <div class="party-member">
                <div class="frame" data-bind="
                    click: $parent.player.setTarget,
                    css: { 'selected': $parent.player.target() === member }">
                    <div class="party-member-name nowrap" data-bind="
                        text: member.name,
                        css: { 'targeted': $parent.boss.targets.indexOf(member) !== -1 }">
                    </div>
                    <div class="health-bar-background">
                        <div class="health-bar" data-bind="style: { width: member.healthPercentageString }">&nbsp;</div>
                        <div class="health-bar-text nowrap" data-bind="text: member.healthStatusString"></div>
                    </div>
                </div>
                <div class="party-member-buffs-container">
                    <div class="party-member-buffs" data-bind="foreach: { data: member.debuffs, as: 'debuff' }">
                        <div class="party-member-buff"><a href="#" data-bind="click: $root.showDebuff"><img data-bind="attr: { src: debuff.icon }" /></a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="cast-bar-container frame thin unselectable">
        <div class="cast-bar-background">
            <div class="cast-bar" data-bind="
                animate: currentCast() || animations.fadeOutCastBarBackground,
                animateAction: currentCast.action">&nbsp;</div>

            <div class="cast-bar-text nowrap" data-bind="
                css: { 'casting': currentCast },
                text: lastCast() && lastCast().healName,
                animate: !currentCast() && animations.fadeOutCastBarText"></div>
        </div>
    </div>
    <div class="mana-bar-container frame thin unselectable" data-bind="css: { 'casting': currentCast }">
        <div class="mana-bar-background">
            <div class="mana-bar" data-bind="style: { width: player.manaPercentageString }">&nbsp;</div>
            <div class="health-bar-text nowrap" data-bind="text: player.manaStatusString"></div>
        </div>
    </div>
    <div class="actions" data-bind="foreach: { data: player.actions, as: 'action' }">
        <div class="action frame" data-bind="text: action, click: $parent.cast"></div>
    </div>
    <div>
        <button data-bind="click: engageBoss, visible: !inCombat()">Engage</button>
        <button data-bind="click: pause, visible: inCombat() && !isPaused()">Pause</button>
        <button data-bind="click: resume, visible: isPaused">Resume</button>
    </div>
</div>